<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.82.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta property="og:title" content="AwesomeWM: about title bars and toggling them"><meta name=keywords content="awesome,dotfiles"><meta property="og:title" content="AwesomeWM: about title bars and toggling them"><meta property="og:description" content="The default rc.lua from Awesome 4.0 turns title bars on. Here I show
how you can turn them off, and also how I enable them only for
floating clients."><meta property="og:type" content="article"><meta property="og:url" content="http://holgerschurig.github.io/en/awesome-4.0-titlebars/"><meta property="article:section" content="en"><meta property="article:published_time" content="2017-01-22T00:00:00+00:00"><meta property="article:modified_time" content="2017-01-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="AwesomeWM: about title bars and toggling them"><meta name=twitter:description content="The default rc.lua from Awesome 4.0 turns title bars on. Here I show
how you can turn them off, and also how I enable them only for
floating clients."><link rel=icon type=image/png href=../../favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../favicon-16x16.png sizes=16x16><link rel=stylesheet type=text/css media=screen href=../../css/normalize.css><link rel=stylesheet type=text/css media=screen href=../../css/main.css><link rel=stylesheet type=text/css media=screen href=../../css/all.css><link rel=stylesheet href=../../css/katex.min.css crossorigin=anonymous><script defer src=../../js/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=../../js/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script><title>AwesomeWM: about title bars and toggling them | Holger Schurig's Computer Calisthenics & Orthodontia</title></head><body><header><div id=avatar><a href=http://holgerschurig.github.io/><img src=../../img/vitae.jpg alt="Holger Schurig's Computer Calisthenics & Orthodontia"></a></div><div id=titletext><h2 id=title><a href=http://holgerschurig.github.io/>Holger Schurig's Computer Calisthenics & Orthodontia</a></h2></div><div id=title-description><p id=subtitle></p><div id=social><nav><ul><li><a href=../../index.xml><i title=RSS class="icons fas fa-rss"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=../../en>English</a></li><li><a href=../../de>Deutsch</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../topics>Topics</a></li><li><a href=../../impressum>Impressum</a></li></ul></nav></div></header><main><div class=post><div class=author></div><div class=post-header><div class=meta><div class=date><span class=day>22</span>
<span class=rest>Jan 2017</span></div></div><div class=matter><h1 class=title>AwesomeWM: about title bars and toggling them</h1></div></div><div class=markdown><p>The default <code>rc.lua</code> from Awesome 4.0 turns title bars on. Here I show
how you can turn them off, and also how I enable them only for
floating clients.</p><p>Note: the following works with AwesomeWM v4.0. I used v4.0-105-gbfb35349.</p><h2 id=removing-the-title-bars>Removing the title bars</h2><p>Users of awesome 3.5.x are surprised that suddenly all clients have a title bar.</p><p>This is because the rules file in the default <code>rc.lua</code> contains those lines:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=color:#888>-- Add title bars to normal clients and dialogs</span>
{ rule_any <span style=color:#333>=</span> {type <span style=color:#333>=</span> { <span style=background-color:#fff0f0>&#34;normal&#34;</span>, <span style=background-color:#fff0f0>&#34;dialog&#34;</span> }
  }, properties <span style=color:#333>=</span> { titlebars_enabled <span style=color:#333>=</span> <span style=color:#080;font-weight:700>true</span> }
},
</code></pre></div><p>So removing the title bars is as easy as changing the <code>true</code> to <code>false</code>.</p><h2 id=removing-the-title-bars-only-for-non-floating-clients>Removing the title bars only for non-floating clients</h2><p>However, now no title bar will ever created. If you want to show a title bar
for a floating client, you cannot do that: there exists none. So let&rsquo;s change
the <code>false</code> back to <code>true</code>.</p><p>Now title bars will be created in the signal handler for the signal
<code>request::titlebar</code>. At the end of the handling function, add this code:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>    ...
        layout <span style=color:#333>=</span> wibox.layout.align.horizontal
    }
    <span style=color:#888>-- Hide the menubar</span>
    awful.titlebar.hide(c)
<span style=color:#080;font-weight:700>end</span>)
</code></pre></div><p>This hides the newly created title bar. Or, maybe we want to hide the
title bar only sometimes, then use:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>    ...
        layout <span style=color:#333>=</span> wibox.layout.align.horizontal
    }
    <span style=color:#888>-- Hide the menubar if we are not floating</span>
    <span style=color:#080;font-weight:700>local</span> l <span style=color:#333>=</span> awful.layout.get(c.screen)
    <span style=color:#080;font-weight:700>if</span> <span style=color:#000;font-weight:700>not</span> (l.name <span style=color:#333>==</span> <span style=background-color:#fff0f0>&#34;floating&#34;</span> <span style=color:#000;font-weight:700>or</span> c.floating) <span style=color:#080;font-weight:700>then</span>
        awful.titlebar.hide(c)
    <span style=color:#080;font-weight:700>end</span>
</code></pre></div><p>And now you can still toggle the title bar, e.g. with this binding:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>clientkey({ modkey, <span style=background-color:#fff0f0>&#34;Control&#34;</span> }, <span style=background-color:#fff0f0>&#34;t&#34;</span>,
   awful.titlebar.toggle,
   {description <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Toggle title bar&#34;</span>, group <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Clients&#34;</span>})
</code></pre></div><p>(See my blog post about <a href=http://holgerschurig.github.io/en/awesome-4.0-bindings/>keybindings</a> to learn
about the <code>clientkey()</code> function.)</p><h2 id=turning-title-bars-on-when-a-client-is-floating>Turning title bars on when a client is floating</h2><p>Or you can show/hide the title bar automatically whenever you toggle
the floating attribute if you add this property signal handler:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>client.connect_signal(<span style=background-color:#fff0f0>&#34;property::floating&#34;</span>, <span style=color:#080;font-weight:700>function</span> (c)
    <span style=color:#080;font-weight:700>if</span> c.floating <span style=color:#080;font-weight:700>then</span>
        awful.titlebar.show(c)
    <span style=color:#080;font-weight:700>else</span>
        awful.titlebar.hide(c)
    <span style=color:#080;font-weight:700>end</span>
<span style=color:#080;font-weight:700>end</span>)
</code></pre></div><p>A possible binding might be:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>clientkey({ modkey, <span style=background-color:#fff0f0>&#34;Control&#34;</span> }, <span style=background-color:#fff0f0>&#34;o&#34;</span>,
   <span style=color:#080;font-weight:700>function</span> (c) c.floating <span style=color:#333>=</span> <span style=color:#000;font-weight:700>not</span> c.floating <span style=color:#080;font-weight:700>end</span>,
   {description <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Toggle floating&#34;</span>, group <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Clients&#34;</span>})
</code></pre></div><h2 id=turning-on-the-title-bars-when-the-layout-is-floating>Turning on the title bars when the layout is floating</h2><p>But what is when I don&rsquo;t set a single client to floating mode (e.g. via rules,
or via a keybinding), but when I use the floating layout suit? As often, a signal
handler can help here:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>awful.tag.attached_connect_signal(s, <span style=background-color:#fff0f0>&#34;property::layout&#34;</span>, <span style=color:#080;font-weight:700>function</span> (t)
    <span style=color:#080;font-weight:700>local</span> float <span style=color:#333>=</span> t.layout.name <span style=color:#333>==</span> <span style=background-color:#fff0f0>&#34;floating&#34;</span>
    <span style=color:#080;font-weight:700>for</span> _,c <span style=color:#080;font-weight:700>in</span> pairs(t:clients()) <span style=color:#080;font-weight:700>do</span>
        c.floating <span style=color:#333>=</span> float
    <span style=color:#080;font-weight:700>end</span>
<span style=color:#080;font-weight:700>end</span>)
</code></pre></div></div><div class=tags><div class=taxosfloating_left><p>Tags</p></div><div class=termsfloating_right><p><a href=../../tags/awesome/>awesome</a>
<a href=../../tags/dotfiles/>dotfiles</a></p></div><div class=clearit></div><div class=tags><div class=taxosfloating_left><p>Topics</p></div><div class=termsfloating_right><p><a href=../../topics/linux/>linux</a></p></div><div class=clearit></div></div></div></main></body></html>