<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=generator content="Hugo 0.122.0"><title>AwesomeWM: using a global title bar &#183; Holger Schurig's Computer Calisthenics & Orthodontia</title>
<link rel=stylesheet href=../../css/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=../../css/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=../../css/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=../../css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=../../css/side-menu.css><!--<![endif]--><link rel=stylesheet href=../../css/blackburn.css><link rel=stylesheet href=../../css/all.min.css><link rel=alternate type=application/rss+xml title="Holger Schurig's Computer Calisthenics & Orthodontia" href=../../index.xml><link rel="shortcut icon" href=../../img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=../../><i class='fa fa-home fa-fw'></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../en/><i class='fa fa-list fa-fw'></i>Articles</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../de/><i class='fa fa-list fa-fw'></i>Beitr√§ge</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../categories/><i class='fa fa-folder fa-fw'></i>Categories</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../tags/><i class='fa fa-tags fa-fw'></i>Tags</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../impressum/><i class='fa fa-phone fa-fw'></i>Impressum</a></li></ul></div></div><div id=main><div class=header><h1>AwesomeWM: using a global title bar</h1><h2></h2></div><div class=content><p>This post shows how you can create a global titlebar. I personally removed the
tasklist and replaced this with the titlebar. The tasklist wasn&rsquo;t good looking anyway
and so far I don&rsquo;t miss the tasklist.</p><p>Note: the following works with AwesomeWM v4.0. I used v4.0-127-g0be3b071.</p><h2 id=create-the-global-title-bar>Create the global title bar</h2><p>Creating the title bar is easy enough:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>local</span> wibox <span style=color:#f92672>=</span> require(<span style=color:#e6db74>&#34;wibox&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>local</span> mytitle <span style=color:#f92672>=</span> wibox.widget {
</span></span><span style=display:flex><span>    markup <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Awesome: press Win-s for help&#34;</span>,
</span></span><span style=display:flex><span>    align <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;left&#34;</span>,
</span></span><span style=display:flex><span>    widget <span style=color:#f92672>=</span> wibox.widget.textbox
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As you can see, the default text is a help text that guides you towards the new
hotkey widget.</p><p>Now we need to put this title onto our screens. Look for this text</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>s.mytasklist, <span style=color:#75715e>-- Middle widget</span>
</span></span></code></pre></div><p>and replace it with</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>{ <span style=color:#75715e>-- Middle widget</span>
</span></span><span style=display:flex><span>    mytitle,
</span></span><span style=display:flex><span>    layout <span style=color:#f92672>=</span> wibox.container.margin,
</span></span><span style=display:flex><span>    left <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>,
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><p>The extra margin gives us some leeway towards the tags, or towards a run prompt.</p><h2 id=connect-the-title-bar-to-clients>Connect the title bar to clients</h2><p>Up to now the title bar just display this help text. That&rsquo;s nice, but that&rsquo;s not what
we want. So we need to add some signal handlers.</p><ul><li>whenever a client get&rsquo;s focus, use it&rsquo;s class and name for the tile</li><li>whenever a client is unfocused, reinstall the help text</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>client.connect_signal(<span style=color:#e6db74>&#34;focus&#34;</span>, <span style=color:#66d9ef>function</span> (c)
</span></span><span style=display:flex><span>    mytitle.markup <span style=color:#f92672>=</span> c.class <span style=color:#f92672>..</span> <span style=color:#e6db74>&#34;: &#34;</span> <span style=color:#f92672>..</span> c.name
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>)
</span></span><span style=display:flex><span>client.connect_signal(<span style=color:#e6db74>&#34;unfocus&#34;</span>, <span style=color:#66d9ef>function</span> (c)
</span></span><span style=display:flex><span>    mytitle.markup <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Awesome: press Win-s for help&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>)
</span></span></code></pre></div><p>Many clients (e.g. &ldquo;urxvt&rdquo; or &ldquo;emacs&rdquo;) update their title on-the-fly. We can
get notified about this as well:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>client.connect_signal(<span style=color:#e6db74>&#34;property::name&#34;</span>, <span style=color:#66d9ef>function</span>(c)
</span></span><span style=display:flex><span>    <span style=color:#75715e>-- ignore property changes from unfocused clients</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> c <span style=color:#f92672>==</span> client.focus <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        mytitle.markup <span style=color:#f92672>=</span> c.class <span style=color:#f92672>..</span> <span style=color:#e6db74>&#34;: &#34;</span> <span style=color:#f92672>..</span> c.name
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>)
</span></span></code></pre></div><div class=post-meta><div><i class="fa fa-copyright fa-fw"></i>
License: <a href=https://spdx.org/licenses/CC-BY-SA-4.0.html target=_blank>CC-BY-SA 4.0</a></div><div><i class="fa fa-calendar fa-fw"></i>
<time>2017-01-22</time></div><div><i class="fa fa-folder fa-fw"></i>
<a class=post-taxonomy-topic href=../../categories/linux>Linux</a>
<a class=rss type=application/rss+xml href=../../categories/linux/index.xml><span class="fa fa-rss">RSS</span></a></div><div><i class="fa fa-tags fa-fw"></i>
<a class=post-taxonomy-tag href=../../tags/awesome>awesome</a>
<a class=rss type=application/rss+xml href=../../tags/awesome/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/dotfiles>dotfiles</a>
<a class=rss type=application/rss+xml href=../../tags/dotfiles/index.xml><span class="fa fa-rss">RSS</span></a></div></div></div></div></div><script src=../../js/ui.js></script><script src=../../js/menus.js></script></body></html>