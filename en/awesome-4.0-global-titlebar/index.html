<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.82.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta property="og:title" content="AwesomeWM: using a global title bar"><meta name=keywords content="awesome,dotfiles"><meta property="og:title" content="AwesomeWM: using a global title bar"><meta property="og:description" content="This post shows how you can create a global titlebar. I personally removed the
tasklist and replaced this with the titlebar. The tasklist wasn&rsquo;t good looking anyway
and so far I don&rsquo;t miss the tasklist."><meta property="og:type" content="article"><meta property="og:url" content="http://holgerschurig.github.io/en/awesome-4.0-global-titlebar/"><meta property="article:section" content="en"><meta property="article:published_time" content="2017-01-22T00:00:00+00:00"><meta property="article:modified_time" content="2017-01-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="AwesomeWM: using a global title bar"><meta name=twitter:description content="This post shows how you can create a global titlebar. I personally removed the
tasklist and replaced this with the titlebar. The tasklist wasn&rsquo;t good looking anyway
and so far I don&rsquo;t miss the tasklist."><link rel=icon type=image/png href=../../favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../favicon-16x16.png sizes=16x16><link rel=stylesheet type=text/css media=screen href=../../css/normalize.css><link rel=stylesheet type=text/css media=screen href=../../css/main.css><link rel=stylesheet type=text/css media=screen href=../../css/all.css><link rel=stylesheet href=../../css/katex.min.css crossorigin=anonymous><script defer src=../../js/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=../../js/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script><title>AwesomeWM: using a global title bar | Holger Schurig's Computer Calisthenics & Orthodontia</title></head><body><header><div id=avatar><a href=http://holgerschurig.github.io/><img src=../../img/vitae.jpg alt="Holger Schurig's Computer Calisthenics & Orthodontia"></a></div><div id=titletext><h2 id=title><a href=http://holgerschurig.github.io/>Holger Schurig's Computer Calisthenics & Orthodontia</a></h2></div><div id=title-description><p id=subtitle></p><div id=social><nav><ul><li><a href=../../index.xml><i title=RSS class="icons fas fa-rss"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=../../en>English</a></li><li><a href=../../de>Deutsch</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../topics>Topics</a></li><li><a href=../../impressum>Impressum</a></li></ul></nav></div></header><main><div class=post><div class=author></div><div class=post-header><div class=meta><div class=date><span class=day>22</span>
<span class=rest>Jan 2017</span></div></div><div class=matter><h1 class=title>AwesomeWM: using a global title bar</h1></div></div><div class=markdown><p>This post shows how you can create a global titlebar. I personally removed the
tasklist and replaced this with the titlebar. The tasklist wasn&rsquo;t good looking anyway
and so far I don&rsquo;t miss the tasklist.</p><p>Note: the following works with AwesomeWM v4.0. I used v4.0-127-g0be3b071.</p><h2 id=create-the-global-title-bar>Create the global title bar</h2><p>Creating the title bar is easy enough:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=color:#080;font-weight:700>local</span> wibox <span style=color:#333>=</span> require(<span style=background-color:#fff0f0>&#34;wibox&#34;</span>)
<span style=color:#080;font-weight:700>local</span> mytitle <span style=color:#333>=</span> wibox.widget {
    markup <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Awesome: press Win-s for help&#34;</span>,
    align <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;left&#34;</span>,
    widget <span style=color:#333>=</span> wibox.widget.textbox
}
</code></pre></div><p>As you can see, the default text is a help text that guides you towards the new
hotkey widget.</p><p>Now we need to put this title onto our screens. Look for this text</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>s.mytasklist, <span style=color:#888>-- Middle widget</span>
</code></pre></div><p>and replace it with</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>{ <span style=color:#888>-- Middle widget</span>
    mytitle,
    layout <span style=color:#333>=</span> wibox.container.margin,
    left <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>12</span>,
},
</code></pre></div><p>The extra margin gives us some leeway towards the tags, or towards a run prompt.</p><h2 id=connect-the-title-bar-to-clients>Connect the title bar to clients</h2><p>Up to now the title bar just display this help text. That&rsquo;s nice, but that&rsquo;s not what
we want. So we need to add some signal handlers.</p><ul><li>whenever a client get&rsquo;s focus, use it&rsquo;s class and name for the tile</li><li>whenever a client is unfocused, reinstall the help text</li></ul><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>client.connect_signal(<span style=background-color:#fff0f0>&#34;focus&#34;</span>, <span style=color:#080;font-weight:700>function</span> (c)
    mytitle.markup <span style=color:#333>=</span> c.class <span style=color:#333>..</span> <span style=background-color:#fff0f0>&#34;: &#34;</span> <span style=color:#333>..</span> c.name
<span style=color:#080;font-weight:700>end</span>)
client.connect_signal(<span style=background-color:#fff0f0>&#34;unfocus&#34;</span>, <span style=color:#080;font-weight:700>function</span> (c)
    mytitle.markup <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Awesome: press Win-s for help&#34;</span>
<span style=color:#080;font-weight:700>end</span>)
</code></pre></div><p>Many clients (e.g. &ldquo;urxvt&rdquo; or &ldquo;emacs&rdquo;) update their title on-the-fly. We can
get notified about this as well:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>client.connect_signal(<span style=background-color:#fff0f0>&#34;property::name&#34;</span>, <span style=color:#080;font-weight:700>function</span>(c)
    <span style=color:#888>-- ignore property changes from unfocused clients</span>
    <span style=color:#080;font-weight:700>if</span> c <span style=color:#333>==</span> client.focus <span style=color:#080;font-weight:700>then</span>
        mytitle.markup <span style=color:#333>=</span> c.class <span style=color:#333>..</span> <span style=background-color:#fff0f0>&#34;: &#34;</span> <span style=color:#333>..</span> c.name
    <span style=color:#080;font-weight:700>end</span>
<span style=color:#080;font-weight:700>end</span>)
</code></pre></div></div><div class=tags><div class=taxosfloating_left><p>Tags</p></div><div class=termsfloating_right><p><a href=../../tags/awesome/>awesome</a>
<a href=../../tags/dotfiles/>dotfiles</a></p></div><div class=clearit></div><div class=tags><div class=taxosfloating_left><p>Topics</p></div><div class=termsfloating_right><p><a href=../../topics/linux/>linux</a></p></div><div class=clearit></div></div></div></main></body></html>