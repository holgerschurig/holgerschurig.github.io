<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.82.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta property="og:title" content="AwesomeWM: Alternative bindings setup"><meta name=keywords content="awesome,dotfiles"><meta property="og:title" content="AwesomeWM: Alternative bindings setup"><meta property="og:description" content="The default rc.lua from the Awesome window manager uses a lot of
globalkeys = awful.util.table.join(...) code.
I disliked this because &mldr;

in Lua, the last field of a table cannot have a comma. So often when
I moved an entry around, I ended up with a pointless syntax error
because of a missing or trailing comma
adding elements by joining seems somewhat complex
adding logic, e.g. only adding a keybinding under specific
circumstances is suddenly more difficult

So let&rsquo;s change this &mldr;"><meta property="og:type" content="article"><meta property="og:url" content="http://holgerschurig.github.io/en/awesome-4.0-bindings/"><meta property="article:section" content="en"><meta property="article:published_time" content="2017-01-22T00:00:00+00:00"><meta property="article:modified_time" content="2017-01-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="AwesomeWM: Alternative bindings setup"><meta name=twitter:description content="The default rc.lua from the Awesome window manager uses a lot of
globalkeys = awful.util.table.join(...) code.
I disliked this because &mldr;

in Lua, the last field of a table cannot have a comma. So often when
I moved an entry around, I ended up with a pointless syntax error
because of a missing or trailing comma
adding elements by joining seems somewhat complex
adding logic, e.g. only adding a keybinding under specific
circumstances is suddenly more difficult

So let&rsquo;s change this &mldr;"><link rel=icon type=image/png href=../../favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../favicon-16x16.png sizes=16x16><link rel=stylesheet type=text/css media=screen href=../../css/normalize.css><link rel=stylesheet type=text/css media=screen href=../../css/main.css><link rel=stylesheet type=text/css media=screen href=../../css/all.css><link rel=stylesheet href=../../css/katex.min.css crossorigin=anonymous><script defer src=../../js/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=../../js/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script><title>AwesomeWM: Alternative bindings setup | Holger Schurig's Computer Calisthenics & Orthodontia</title></head><body><header><div id=avatar><a href=http://holgerschurig.github.io/><img src=../../img/vitae.jpg alt="Holger Schurig's Computer Calisthenics & Orthodontia"></a></div><div id=titletext><h2 id=title><a href=http://holgerschurig.github.io/>Holger Schurig's Computer Calisthenics & Orthodontia</a></h2></div><div id=title-description><p id=subtitle></p><div id=social><nav><ul><li><a href=../../index.xml><i title=RSS class="icons fas fa-rss"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=../../en>English</a></li><li><a href=../../de>Deutsch</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../topics>Topics</a></li><li><a href=../../impressum>Impressum</a></li></ul></nav></div></header><main><div class=post><div class=author></div><div class=post-header><div class=meta><div class=date><span class=day>22</span>
<span class=rest>Jan 2017</span></div></div><div class=matter><h1 class=title>AwesomeWM: Alternative bindings setup</h1></div></div><div class=markdown><p>The default <code>rc.lua</code> from the Awesome window manager uses a lot of
<code>globalkeys = awful.util.table.join(...)</code> code.</p><p>I disliked this because &mldr;</p><ul><li>in Lua, the last field of a table cannot have a comma. So often when
I moved an entry around, I ended up with a pointless syntax error
because of a missing or trailing comma</li><li>adding elements by joining seems somewhat complex</li><li>adding logic, e.g. only adding a keybinding under specific
circumstances is suddenly more difficult</li></ul><p>So let&rsquo;s change this &mldr;</p><p>Note: the following works with AwesomeWM v4.0. I used v4.0-105-gbfb35349.</p><h2 id=define-binding-functions>Define binding functions</h2><p>I define a function where I can add one binding at a time:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=color:#080;font-weight:700>local</span> tinsert <span style=color:#333>=</span> table.insert

globalkeys <span style=color:#333>=</span> {}    
<span style=color:#080;font-weight:700>function</span> <span style=color:#06b;font-weight:700>globalkey</span>(mod, key, func, desc)
   <span style=color:#080;font-weight:700>local</span> key <span style=color:#333>=</span> awful.key(mod, key, func, desc)
   <span style=color:#080;font-weight:700>for</span> k,v <span style=color:#080;font-weight:700>in</span> pairs(key) <span style=color:#080;font-weight:700>do</span>
      tinsert(globalkeys, v)
   <span style=color:#080;font-weight:700>end</span>
<span style=color:#080;font-weight:700>end</span>

clientkeys <span style=color:#333>=</span> {}
<span style=color:#080;font-weight:700>function</span> <span style=color:#06b;font-weight:700>clientkey</span>(mod, key, func, desc)
   <span style=color:#080;font-weight:700>local</span> key <span style=color:#333>=</span> awful.key(mod, key, func, desc)
   <span style=color:#080;font-weight:700>for</span> k,v <span style=color:#080;font-weight:700>in</span> pairs(key) <span style=color:#080;font-weight:700>do</span>
      tinsert(clientkeys, v)
   <span style=color:#080;font-weight:700>end</span>
<span style=color:#080;font-weight:700>end</span>
</code></pre></div><h2 id=example-usage>Example usage</h2><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=color:#888>-- TAGS</span>
globalkey({ modkey }, <span style=background-color:#fff0f0>&#34;Escape&#34;</span>,
   awful.tag.history.restore,
   {description <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Previous tag&#34;</span>, group <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Tags&#34;</span>})
globalkey({ modkey }, <span style=background-color:#fff0f0>&#34;Right&#34;</span>,
   awful.tag.viewnext,
   {description <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Tag forward&#34;</span>, group <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Tags&#34;</span>})
globalkey({ modkey }, <span style=background-color:#fff0f0>&#34;Left&#34;</span>,
   awful.tag.viewprev,
   {description <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Tag backword&#34;</span>, group <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;Tags&#34;</span>})
</code></pre></div><p>I think this looks generally more pleasing. See
my
<a href="https://bitbucket.org/holgerschurig/dotfiles/src/HEAD/awesome-4/.config/awesome/bindings.lua?at=master&fileviewer=file-view-default" target=_blank>bindings.lua</a> file
a longer example.</p></div><div class=tags><div class=taxosfloating_left><p>Tags</p></div><div class=termsfloating_right><p><a href=../../tags/awesome/>awesome</a>
<a href=../../tags/dotfiles/>dotfiles</a></p></div><div class=clearit></div><div class=tags><div class=taxosfloating_left><p>Topics</p></div><div class=termsfloating_right><p><a href=../../topics/linux/>linux</a></p></div><div class=clearit></div></div></div></main></body></html>