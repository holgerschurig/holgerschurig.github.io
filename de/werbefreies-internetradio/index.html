<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=generator content="Hugo 0.139.4"><title>Home-Assistant: (fast) werbefreies Internetradio &#183; Holger Schurig's Computer Calisthenics & Orthodontia</title>
<link rel=stylesheet href=../../css/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=../../css/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=../../css/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=../../css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=../../css/side-menu.css><!--<![endif]--><link rel=stylesheet href=../../css/blackburn.css><link rel=stylesheet href=../../css/all.min.css><link rel=alternate type=application/rss+xml title="Holger Schurig's Computer Calisthenics & Orthodontia" href=../../index.xml><link rel="shortcut icon" href=../../img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=../../><i class='fa fa-home fa-fw'></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../en/><i class='fa fa-list fa-fw'></i>Articles</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../de/><i class='fa fa-list fa-fw'></i>Beiträge</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../categories/><i class='fa fa-folder fa-fw'></i>Categories</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../tags/><i class='fa fa-tags fa-fw'></i>Tags</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../impressum/><i class='fa fa-phone fa-fw'></i>Impressum</a></li></ul></div></div><div id=main><div class=header><h1>Home-Assistant: (fast) werbefreies Internetradio</h1><h2></h2></div><div class=content><p>Wir erstellen uns ein Internet-Radio mit einer Pausen-Funktion zu
festen Uhrzeiten. Damit können wir bei einigen Sendern die nervige
Werbung ausblenden.</p><p>Außerdem: warum der Home-Assistant-Radio-Browser nichts taugt. Und
eine USB-Soundbar besser ist als ein Sonos- oder Symfonisk-Lautsprecher.</p><div class="ox-hugo-toc toc"><div class=heading>Table of Contents</div><ul><li><a href=#grund>Grund</a></li><li><a href=#was-man-braucht>Was man braucht</a><ul><li><a href=#radio-browser-lieblos>Radio Browser - lieblos!</a></li><li><a href=#radio-browser-diesmal-per-web>Radio-Browser, diesmal per Web</a></li></ul></li><li><a href=#internetradio>Internetradio</a><ul><li><a href=#service-aufruf>Service-Aufruf</a></li><li><a href=#helferlein>Helferlein</a></li><li><a href=#script-n%C3%A4chster-sender>Script: nächster Sender</a></li><li><a href=#script-vorheriger-sender>Script: vorheriger Sender</a></li><li><a href=#scripte-sender-starten>Scripte: Sender starten</a></li><li><a href=#script-weitermachen>Script: Weitermachen</a></li><li><a href=#script-radio-pausieren>Script: Radio Pausieren</a></li><li><a href=#script-radio-aus>Script: Radio aus</a></li><li><a href=#script-radio-start-stop>Script: Radio Start/Stop</a></li></ul></li><li><a href=#bedienung>Bedienung</a><ul><li><a href=#gui>GUI</a></li><li><a href=#taster>Taster</a></li></ul></li><li><a href=#werbepause>Werbepause</a></li><li><a href=#verbesserungspotential>Verbesserungspotential</a></li></ul></div><h2 id=grund>Grund</h2><p>Wer mag ihn nicht, den nervigen Herrn Seitenbacher der uns seit Jahren
mit unendlichen Wiederholungen traktiert?</p><p>Oder die unvorteilhaften Stimmen von LILD und Kaufland, deren einzige
Qualifikation wahrscheinlich die Aussprache ist &mldr; und das sie
maximal nervend sind, um Aufmerksamkeitsheischend zu unseren
Gehirnzellen vorzudringen?</p><p>Wer mag sie nicht &mldr;. <strong>ICH</strong> !!!</p><h2 id=was-man-braucht>Was man braucht</h2><p>Man muss ein Sound-Device haben, welches als
&ldquo;<code>media_player.irgendwas</code>&rdquo; erreichbar ist.</p><p>Zwei Beispiele von vielen:</p><p><strong>Symfonisk- oder Sonos-Lautsprecher</strong></p><p>Diese werden beide durch die <a href=https://www.home-assistant.io/integrations/sonos>Sonos-Integration</a> unterstützt. Allerdings
kann man diese nicht empfehlen:</p><ul><li>die Sonos-App für Android funktioniert seit Monaten nicht und hat
deshalb unterirdische Bewertungen</li><li>der Symfonisk/Sonos-Lautsprecher reagiert sehr langsam auf
Abspielkommandos. Stoppen geht hingegen recht schnell.</li><li>aber er spielt auch langsam ab. Zwischen der USB/VLC basierter
Soundbar und dem Symfonisk-Lautsprecher gibt es eine <strong>mächtige</strong>
Verzögerung. Über USB kommt der Sound fast eine Sekunde schneller
als via Symfonisk/Sonos.</li></ul><p><strong>USB-Lautsprecher</strong></p><p>Ich hatte aber noch eine &ldquo;Creative Stage V2 Soundbar&rdquo;. Diese hat u.A.
USB. Und ich habe sie darüber an meinen Intel NUC angeschlossen, auf
dem Home-Assistant innerhalb von Proxmox läuft. Das ganze sieht grob
so aus:</p><figure><img src=../../de/werbefreies-internetradio/werbefreies-internetradio.png></figure><p>Was auch immer man macht, man braucht für alles folgende ein
funktionierendes &ldquo;<code>media_player.*</code>&rdquo; Device!</p><h3 id=radio-browser-lieblos>Radio Browser - lieblos!</h3><p>Es gibt den integrierten
<a href=https://www.home-assistant.io/integrations/radio_browser/>Radio Browser</a> nutzen. Aber dessen Datenbasis ist&mldr; unterirdisch. Wenn
man links auf &ldquo;Media&rdquo; und dann auf &ldquo;Radio Browser&rdquo; klickt, sieht man
die Landesflaggen.</p><p>Also runter zu &ldquo;Germany&rdquo;. Huch, da gibt&rsquo;s ja zwei? Ich dachte, das
wäre Geschichte. Aber wo sind bei der zweiten Flagge dann Hammer und Sichel?</p><figure><img src=./werbefreies-internetradio-radiobrowser.png></figure><p>Klickt man auf eine, dann auf den Zurückbutton des Radio-Browser
(nicht von Firefox/Chromium etc &mldr;) dann landet man &mldr; wieder an
Anfang der Länderliste. <strong>Die Position wird sich nicht gemerkt</strong>, ich
muss wieder runterscrollen.</p><p>Wenn ich dann auf eine der deutschen Flagge klicke &mldr; welche ist egal
.. dann kommen Radiosender. Doch sie erscheinen irgendwie unsortiert.</p><p>Bis man merkt, das auch da Aufmerksamkeitsheischende Leutchen
<strong>getrickst</strong> haben. Ein " 90s" (zwei Leerzeichen) wird halt, wenn man stur nach
ASCII-Alphabet sortiert, vor &ldquo;HR3&rdquo; angezeigt. Wäre ich der
Plugin-Autor, würde ich diese Tricks-Namen einfach herausfiltern.</p><p>Apropos &ldquo;HR3&rdquo;&mldr; man suche nun mal diesen Sender. Fast unmöglich, weil
es <strong>keine Suchfunktion</strong> gibt. Also ist Suchen per Scrollen und Lesen angesagt.</p><p>Page-Up und Page-Down <strong>gehen natürlich auch nicht</strong>.</p><p>Nehmen wir mal an, wir sind glücklich bei HR3 gelandet. Klickt man nun
auf den Zurück-Button des Radio-Browsers, sucht erneut die deutsche
Flagge, und klickt dann wieder darauf &mldr; ist man <strong>wieder am Anfang</strong>.
Und darf wieder suchen.</p><p>Und wenn ich nun einen Sender per Automation hören will &mldr; hier
findet man keine Information, wie das denn gehen könnte. Wie ich also
z.B. den HR3-Button automatisiert drücken könnte.</p><p>Am besten vergessen wir den eingebauten &ldquo;Radio Browser&rdquo; ganz schnell.
Das ist insgesamt ein grausames UI.</p><h3 id=radio-browser-diesmal-per-web>Radio-Browser, diesmal per Web</h3><p>Aber woher holt sich Home-Assistant überhaupt die Sender? Von
<a href=https://www.radio-browser.info/>https://www.radio-browser.info/</a> &mdash; man findet da zwar auch die
getricksten Sendernamen. Aber wenigstens gibt es eine Suchfunktion.</p><p>Also oben rechts &ldquo;hr3&rdquo; eingeben und schon hat man die Streams:</p><figure><img src=./werbefreies-internetradio-radiobrowserinfo.png></figure><p>Wenn man nun auf einen der Einträge klickt, sieht in der Adresszeile
von Firefox/Chromium URLs dieser Art:</p><p><a href=https://www.radio-browser.info/history/c9f56165-ab64-4af8-ba90-dfb0aa735218>https://www.radio-browser.info/history/c9f56165-ab64-4af8-ba90-dfb0aa735218</a></p><p>Und dieses &ldquo;<strong>c9f56165-ab64-4af8-ba90-dfb0aa735218</strong>&rdquo; (eine sog. UUID)
ist nun das, was wir gleich in Home-Assistant brauchen werden.</p><p>Wir nutzen also <a href=https://www.radio-browser.info>https://www.radio-browser.info</a>, um die UUIDs der Sender zu erfahren.</p><h2 id=internetradio>Internetradio</h2><h3 id=service-aufruf>Service-Aufruf</h3><p>Was macht man nun mit der UUID? Zunächst einen Test! In den
Developer-Tools gibt man das ein:</p><figure><img src=./werbefreies-internetradio-developertools.png></figure><p>bzw. dieses YAML:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>action: media_player.play_media
</span></span><span style=display:flex><span>target:
</span></span><span style=display:flex><span>  entity_id: media_player.soundbar_wz
</span></span><span style=display:flex><span>data:
</span></span><span style=display:flex><span>  media_content_id: media-source://radio_browser/c9f56165-ab64-4af8-ba90-dfb0aa735218
</span></span><span style=display:flex><span>  media_content_type: music
</span></span></code></pre></div><p>Wir sehen hier &ldquo;<code>media-source://radio_browser/</code>&rdquo; gefolgt von unser
eben herausgefunden UUID.</p><p>Wenn wir das nun als Script (statt in den Developer Tools) anlegen,
können wir es in Automationen, GUI-Elementen nutzen.</p><figure><img src=./werbefreies-internetradio-buttons.png></figure><p>&mldr; oder mit <a href=../../de/ikea-schalter-e2001/>Hardware-Schaltern </a>steuern.</p><h3 id=helferlein>Helferlein</h3><p>Wir erstellen uns zwei String-Helfer. Das geht so:</p><ul><li>Settings</li><li>Devices & services</li><li>Helpers</li><li>Create helper</li><li>Text</li><li>Name: &ldquo;Radio Sender&rdquo;</li><li>Icon: nach belieben</li></ul><p>Und dann noch einen Helfer dieser Art für &ldquo;Radio UUID&rdquo;:</p><figure><img src=./werbefreies-internetradio-helfer.png></figure><h3 id=script-nächster-sender>Script: nächster Sender</h3><p>Diese Helfer werden in den folgenden Skripten genutzt. Beispielsweise
wie hier für eine Funktion, um zum nächsten Sender zu springen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>script:
</span></span><span style=display:flex><span>  radio_next:
</span></span><span style=display:flex><span>    alias: &#34;Radio Next&#34;
</span></span><span style=display:flex><span>    sequence:
</span></span><span style=display:flex><span>      - choose:
</span></span><span style=display:flex><span>          - conditions:
</span></span><span style=display:flex><span>              - condition: template
</span></span><span style=display:flex><span>                value_template: &#34;{{ states(&#39;input_text.radio_sender&#39;) == &#39;&#39; }}&#34;
</span></span><span style=display:flex><span>            sequence:
</span></span><span style=display:flex><span>              - action: script.radio_hr1
</span></span><span style=display:flex><span>          - conditions:
</span></span><span style=display:flex><span>              - condition: template
</span></span><span style=display:flex><span>                value_template: &#34;{{ states(&#39;input_text.radio_sender&#39;) == &#39;HR1&#39; }}&#34;
</span></span><span style=display:flex><span>            sequence:
</span></span><span style=display:flex><span>              - action: script.radio_hr3
</span></span><span style=display:flex><span>          - conditions:
</span></span><span style=display:flex><span>              - condition: template
</span></span><span style=display:flex><span>                value_template: &#34;{{ states(&#39;input_text.radio_sender&#39;) == &#39;HR3&#39; }}&#34;
</span></span><span style=display:flex><span>            sequence:
</span></span><span style=display:flex><span>              - action: script.radio_hrinfo
</span></span><span style=display:flex><span>          - conditions:
</span></span><span style=display:flex><span>              - condition: template
</span></span><span style=display:flex><span>                value_template: &#34;{{ states(&#39;input_text.radio_sender&#39;) == &#39;hr INFO&#39; }}&#34;
</span></span><span style=display:flex><span>            sequence:
</span></span><span style=display:flex><span>              - action: script.radio_dlf
</span></span><span style=display:flex><span>          - conditions:
</span></span><span style=display:flex><span>              - condition: template
</span></span><span style=display:flex><span>                value_template: &#34;{{ states(&#39;input_text.radio_sender&#39;) == &#39;DLF&#39; }}&#34;
</span></span><span style=display:flex><span>            sequence:
</span></span><span style=display:flex><span>              - action: script.radio_dlfnova
</span></span><span style=display:flex><span>          - conditions:
</span></span><span style=display:flex><span>              - condition: template
</span></span><span style=display:flex><span>                value_template: &#34;{{ states(&#39;input_text.radio_sender&#39;) == &#39;DLF Nova&#39; }}&#34;
</span></span><span style=display:flex><span>            sequence:
</span></span><span style=display:flex><span>              - action: script.radio_hr1
</span></span></code></pre></div><p>(Das YAML startet mit &ldquo;<code>script:</code>&rdquo; weil ich Home-Assistant&rsquo;s <a href=https://www.home-assistant.io/docs/configuration/packages/>Packages</a>
verwende. Ich habe alle Media-Script in <code>/config/packages/media.yaml</code>
gesammelt. Wer das YAML direkt in den Editor reinhaut, muss es
entsprechend anpassen.)</p><p>Im Prinzip ist das, analog zu C, ein switch/case Statement. Und die
Bedingungen wird über ein Template festgelegt.</p><h3 id=script-vorheriger-sender>Script: vorheriger Sender</h3><p>Das Script für &ldquo;vorheriger Sender&rdquo; ist analog wie &ldquo;nächster Sender&rdquo; aufgebaut.</p><h3 id=scripte-sender-starten>Scripte: Sender starten</h3><p>Dieses Script setzt die beiden Helfer auf Text und UUID. Es ruft nicht
direkt media_player.play_media auf. Denn ich brauche die UUID für eine
Pause/Continue-Funktion. Und wenn ich sowieso eine Continue-Funktion
erstellen werden, kann ich die auch gleich hier aufrufen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>script:
</span></span><span style=display:flex><span>  radio_hr1:
</span></span><span style=display:flex><span>    alias: &#34;Radio HR1&#34;
</span></span><span style=display:flex><span>    sequence:
</span></span><span style=display:flex><span>      - action: input_text.set_value
</span></span><span style=display:flex><span>        target:
</span></span><span style=display:flex><span>          entity_id: input_text.radio_sender
</span></span><span style=display:flex><span>        data:
</span></span><span style=display:flex><span>          value: &#34;HR1&#34;
</span></span><span style=display:flex><span>      - action: input_text.set_value
</span></span><span style=display:flex><span>        target:
</span></span><span style=display:flex><span>          entity_id: input_text.radio_uuid
</span></span><span style=display:flex><span>        data:
</span></span><span style=display:flex><span>          value: &#34;600c73d1-2ea5-45ee-b3c1-c108674343e6&#34;
</span></span><span style=display:flex><span>      - action: script.radio_continue
</span></span></code></pre></div><p>Dieses Script erstelle ich dann abgewandelt für alle Sender die ich
per Button starten will: HR1, HR3, hr-info, DLF, DLF Nova.</p><h3 id=script-weitermachen>Script: Weitermachen</h3><p>Hier ist das &ldquo;<code>script.radio_continue</code>&rdquo;, das oben aufgerufe wurde:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>script:
</span></span><span style=display:flex><span>  radio_continue:
</span></span><span style=display:flex><span>    alias: &#34;Radio Continue&#34;
</span></span><span style=display:flex><span>    sequence:
</span></span><span style=display:flex><span>      - action: media_player.play_media
</span></span><span style=display:flex><span>        target:
</span></span><span style=display:flex><span>          entity_id: media_player.soundbar_wz
</span></span><span style=display:flex><span>        data:
</span></span><span style=display:flex><span>          media_content_type: music
</span></span><span style=display:flex><span>          media_content_id: &#34;media-source://radio_browser/{{ states(&#39;input_text.radio_uuid&#39;) }}&#34;
</span></span></code></pre></div><h3 id=script-radio-pausieren>Script: Radio Pausieren</h3><p>Und da &ldquo;<code>script.radio_continue</code>&rdquo; ja mit einer Pause-Funktion
zusammenspielen soll, brauchen wir die auch noch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>radio_pause:
</span></span><span style=display:flex><span>  alias: &#34;Radio Pause&#34;
</span></span><span style=display:flex><span>  sequence:
</span></span><span style=display:flex><span>    - action: media_player.media_stop
</span></span><span style=display:flex><span>      target:
</span></span><span style=display:flex><span>        entity_id: media_player.soundbar_wz
</span></span></code></pre></div><h3 id=script-radio-aus>Script: Radio aus</h3><p>Wenn wir hingegen richtig asusschalten wollen, dann Stoppen wir den
Media-Player und setzen auch die Helfer zurück.</p><p>Andere Script können dann am leeren UUID-Feld erkennen, das das Radio
in wirklich aus ist (es soll also z.B. zur vollen Stunde wieder
angemacht werden, etwa nach einer Werbepause).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>script:
</span></span><span style=display:flex><span>  radio_off:
</span></span><span style=display:flex><span>    alias: &#34;Radio Off&#34;
</span></span><span style=display:flex><span>    sequence:
</span></span><span style=display:flex><span>      - action: media_player.media_stop
</span></span><span style=display:flex><span>        target:
</span></span><span style=display:flex><span>          entity_id: media_player.soundbar_wz
</span></span><span style=display:flex><span>      - action: input_text.set_value
</span></span><span style=display:flex><span>        target:
</span></span><span style=display:flex><span>          entity_id: input_text.radio_sender
</span></span><span style=display:flex><span>        data:
</span></span><span style=display:flex><span>          value: &#34;&#34;
</span></span><span style=display:flex><span>      - action: input_text.set_value
</span></span><span style=display:flex><span>        target:
</span></span><span style=display:flex><span>          entity_id: input_text.radio_uuid
</span></span><span style=display:flex><span>        data:
</span></span><span style=display:flex><span>          value: &#34;&#34;
</span></span></code></pre></div><h3 id=script-radio-start-stop>Script: Radio Start/Stop</h3><p>Dieses Script habe ich auf eine Hardware-Taste (IKEA Styrbar) gelegt:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>script:
</span></span><span style=display:flex><span>  radio_startstop:
</span></span><span style=display:flex><span>    alias: &#34;Radio Start/Stop&#34;
</span></span><span style=display:flex><span>    sequence:
</span></span><span style=display:flex><span>      - if:
</span></span><span style=display:flex><span>          - condition: state
</span></span><span style=display:flex><span>            entity_id: input_text.radio_sender
</span></span><span style=display:flex><span>            state: &#34;&#34;
</span></span><span style=display:flex><span>        then:
</span></span><span style=display:flex><span>          - action: script.radio_hr1
</span></span><span style=display:flex><span>        else:
</span></span><span style=display:flex><span>          - if:
</span></span><span style=display:flex><span>              - condition: state
</span></span><span style=display:flex><span>                entity_id: media_player.soundbar_wz
</span></span><span style=display:flex><span>                state: &#34;playing&#34;
</span></span><span style=display:flex><span>            then:
</span></span><span style=display:flex><span>              - action: script.radio_pause
</span></span><span style=display:flex><span>            else:
</span></span><span style=display:flex><span>              - if:
</span></span><span style=display:flex><span>                  - condition: state
</span></span><span style=display:flex><span>                    entity_id: media_player.soundbar_wz
</span></span><span style=display:flex><span>                    state: &#34;idle&#34;
</span></span><span style=display:flex><span>                then:
</span></span><span style=display:flex><span>                  - action: script.radio_continue
</span></span></code></pre></div><ul><li>läuft kein Sender: wird HR1 gestartet</li><li>läuft ein Sender: dann rufe ich das Pausen-Script auf</li><li>ansonsten wird &ldquo;Radio Continue&rdquo; aufgerufen</li></ul><h2 id=bedienung>Bedienung</h2><h3 id=gui>GUI</h3><p>Ich habe mir ein Dashboard angelegt, das mir einfachen Zugriff auf die
Sender ermöglicht:</p><figure><img src=./werbefreies-internetradio-webgui.png></figure><h3 id=taster>Taster</h3><p>Aber meistens nehme ich den <a href=../../de/ikea-schalter-e2001/>IKEA Styrbar </a>&mdash; mit
<a href=https://github.com/Sian-Lee-SA/Home-Assistant-Switch-Manager>Switch Manager</a> folgermaßen beschaltet:</p><figure><img src=./werbefreies-internetradio-schalter.png></figure><ul><li>Oben: Licht</li><li>Links: vorheriger Sender</li><li>Rechts: nächster Sender</li><li>Unten: Pause bzw. Weiter, bei langen Drücken: Stop</li></ul><p>Dieser Schalter wandert von meinem PC-Schreibtisch zum
Wohnzimmer-Couchtisch zum Home-Office, wo er gerade gebraucht wird.</p><h2 id=werbepause>Werbepause</h2><p>Bisher haben wir nur ein Internet-Radio. Aber wie machen wir das nun
mit der Werbung? Im Prinzip nutzen wir aus, das Werbung in vielen
Sendern zur festen Uhrzeit kommt. Wir schalten dann einfach das Radio
auf &ldquo;Pause&rdquo;:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>automation:
</span></span><span style=display:flex><span>  - alias: &#34;Radio wg. Werbung aus (HR1)&#34;
</span></span><span style=display:flex><span>    triggers:
</span></span><span style=display:flex><span>      - trigger: time_pattern
</span></span><span style=display:flex><span>        minutes: &#34;27&#34;
</span></span><span style=display:flex><span>      - trigger: time_pattern
</span></span><span style=display:flex><span>        minutes: &#34;57&#34;
</span></span><span style=display:flex><span>    conditions:
</span></span><span style=display:flex><span>      # - condition: state
</span></span><span style=display:flex><span>      #   entity_id: binary_sensor.feiertag
</span></span><span style=display:flex><span>      #   state: &#34;off&#34;
</span></span><span style=display:flex><span>      - condition: time
</span></span><span style=display:flex><span>        after: &#34;6:00:00&#34;
</span></span><span style=display:flex><span>        before: &#34;20:00:00&#34;
</span></span><span style=display:flex><span>      - condition: time
</span></span><span style=display:flex><span>        weekday:
</span></span><span style=display:flex><span>          - mon
</span></span><span style=display:flex><span>          - tue
</span></span><span style=display:flex><span>          - wed
</span></span><span style=display:flex><span>          - thu
</span></span><span style=display:flex><span>          - fri
</span></span><span style=display:flex><span>          - sat
</span></span><span style=display:flex><span>      - condition: state
</span></span><span style=display:flex><span>        entity_id: input_text.radio_sender
</span></span><span style=display:flex><span>        state: &#34;HR1&#34;
</span></span><span style=display:flex><span>    actions:
</span></span><span style=display:flex><span>      - action: script.radio_pause
</span></span><span style=display:flex><span>    mode: restart
</span></span></code></pre></div><p>(Auch hier steht wieder ein &ldquo;<code>automation:</code>&rdquo; davor, weil dieses YAML
gemeinsam mit den Scripten von oben in einer
Home-Assistant-<a href=https://www.home-assistant.io/docs/configuration/packages/>Packages</a>-Datei steht. Wer das in sein GUI rainhauen
will, passt es entsprechend an.)</p><p>Wir pausieren also zwischen 6 und 20 Uhr das Radio jeweils 3 Minuten
vor der vollen Stunde und halben Stunde.</p><p>Noch auskommentiert sieht man, wie man diesen &ldquo;Werbeblocker&rdquo; auch an
Feiertagen festmachen könnte.</p><p>Wenn wir pausieren, dann wollen wir aber auch irgendwann wieder
fortfahren:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>automation:
</span></span><span style=display:flex><span>  - alias: &#34;Radio nach Werbung an (HR1)&#34;
</span></span><span style=display:flex><span>    triggers:
</span></span><span style=display:flex><span>      - trigger: time_pattern
</span></span><span style=display:flex><span>        minutes: &#34;0&#34;
</span></span><span style=display:flex><span>      - trigger: time_pattern
</span></span><span style=display:flex><span>        minutes: &#34;32&#34;
</span></span><span style=display:flex><span>    conditions:
</span></span><span style=display:flex><span>      # - condition: state
</span></span><span style=display:flex><span>      #   entity_id: binary_sensor.feiertag
</span></span><span style=display:flex><span>      #   state: &#34;off&#34;
</span></span><span style=display:flex><span>      - condition: state
</span></span><span style=display:flex><span>        entity_id: input_text.radio_sender
</span></span><span style=display:flex><span>        state: &#34;HR1&#34;
</span></span><span style=display:flex><span>    actions:
</span></span><span style=display:flex><span>        action: script.radio_continue
</span></span><span style=display:flex><span>    mode: restart
</span></span></code></pre></div><p>Für HR3 ist das ähnlich, nur senden sie die Werbung zur viertel- und
dreiviertel Stunde.</p><p>hr-info sendet so wenig Werbung, das ich da nichts implementiert habe.
DLF und DLF Nova sind sowieso vollkommen Werbefrei.</p><h2 id=verbesserungspotential>Verbesserungspotential</h2><p>Besser wäre es vermutlich, wenn man die Jingles vor der Werbung
erkennt. Da wir potentielle viele Strings erkennen sollten, wäre
vielleicht eine <a href=https://de.wikipedia.org/wiki/Rabin-Karp-Algorithmus>Robin-Karp-Suche</a> praktisch. Zu jedem Suchmuster könnte
man eine Pausen-Zeit eintragen.</p><p>Dieser Suche nach Werbung oder Werbe-Jingles könnte Rundfunk über
Stream empfangen (wie oben). Oder man könnte sie in einen
Software-DAB+-Empfänger mit Hilfe eine günstigen <a href=https://www.rtl-sdr.com/>RTL-SDR</a>-Stick
einbauen. Ein Beispiele wäre <a href=https://github.com/Opendigitalradio/dablin>DABlin</a> oder <a href=https://www.welle.io/>Welle.io</a>.</p><div class=post-meta><div><i class="fa fa-copyright fa-fw"></i>
License: <a href=https://spdx.org/licenses/CC-BY-SA-4.0.html target=_blank>CC-BY-SA 4.0</a></div><div><i class="fa fa-calendar fa-fw"></i>
<time>2024-12-09</time></div><div><i class="fa fa-folder fa-fw"></i>
<a class=post-taxonomy-topic href=../../categories/home-assistant>home-assistant</a>
<a class=rss type=application/rss+xml href=../../categories/home-assistant/index.xml><span class="fa fa-rss">RSS</span></a></div><div><i class="fa fa-tags fa-fw"></i>
<a class=post-taxonomy-tag href=../../tags/styrbar>Styrbar</a>
<a class=rss type=application/rss+xml href=../../tags/styrbar/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/e2001>E2001</a>
<a class=rss type=application/rss+xml href=../../tags/e2001/index.xml><span class="fa fa-rss">RSS</span></a></div></div></div></div></div><script src=../../js/ui.js></script><script src=../../js/menus.js></script></body></html>