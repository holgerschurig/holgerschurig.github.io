<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=generator content="Hugo 0.121.2"><title>OpenEmbedded &#183; Holger Schurig's Computer Calisthenics & Orthodontia</title>
<link rel=stylesheet href=../../css/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=../../css/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=../../css/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=../../css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=../../css/side-menu.css><!--<![endif]--><link rel=stylesheet href=../../css/blackburn.css><link rel=stylesheet href=../../css/all.min.css><link rel=alternate type=application/rss+xml title="Holger Schurig's Computer Calisthenics & Orthodontia" href=../../index.xml><link rel="shortcut icon" href=../../img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=../../><i class='fa fa-home fa-fw'></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../en/><i class='fa fa-list fa-fw'></i>Articles</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../de/><i class='fa fa-list fa-fw'></i>Beiträge</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../categories/><i class='fa fa-folder fa-fw'></i>Categories</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../tags/><i class='fa fa-tags fa-fw'></i>Tags</a></li><li class=pure-menu-item><a class=pure-menu-link href=../../impressum/><i class='fa fa-phone fa-fw'></i>Impressum</a></li></ul></div></div><div id=main><div class=header><h1>OpenEmbedded</h1><h2></h2></div><div class=content><p>Ein kleiner Abriss, wie OpenEmbedded entstand, was mein Beitrag war und wieso<br>ich später eine bessere Lösung im Embedded-Linux-Bereich eingesetzt habe.<br></p><div class="ox-hugo-toc toc"><div class=heading>Table of Contents</div><ul><li><a href=#projekt-info>Projekt-Info</a></li><li><a href=#geschichte>Geschichte</a></li><li><a href=#bitbake>Bitbake</a></li><li><a href=#von-bitkeeper-zu-git>Von BitKeeper zu Git</a></li><li><a href=#mein-ausstieg>Mein Ausstieg</a></li><li><a href=#verwandte-projekte>Verwandte Projekte</a></li></ul></div><div class=job><p>In Beiträgen der Kategorie <a href=../../categories/job/>Job</a> trage ich Projekte zusammen, die ich im Rahmen<br>meiner beruflichen Karriere federführend durchgeführt habe. Ich gehe dabei mit<br>Absicht nicht allzusehr auf Details an: die Interessen meiner Arbeitgeber sollen<br>ja nicht berührt werden.<br></p></div><h2 id=projekt-info>Projekt-Info</h2><p>Idee: Chris Larson, Michael Lauer, ich<br></p><p>Umsetzung: (Programm) ich, (Träger-Verein) Michael Lauer, (Kommunikation) Chris<br>Larson. Später haben noch viele andere Leute mitgebracht, hervorheben mächte ich<br>Holger Freyther (der &ldquo;<code>bitbake</code>&rdquo; verbessert hat und Marcin Juskiecz, der viele,<br>viele Rezepte erstellt bzw. verbessert hat.<br></p><p>Nutzung: 2003 bis 2010, das Projekt dauert aber bis heute an<br></p><p>Implementatierung: Make, Bash, Python, BitKeeper (zunächst), dann Git, Bitbake-Recipes<br></p><h2 id=geschichte>Geschichte</h2><p>Im Jahr 2003 gab es noch keine Smartphones. Aber ungefähr zu diesem Zeitpunkt tauchte<br>der Sharp Zaurus auf. Das war ein kleiner PDA mit Intel StrongARM SA1100 CPU.<br></p><p><figure><img src=./sharp_zaurus.jpg></figure><br></p><p>Auf diesem Bild, kopiert von <a href=https://en.wikipedia.org/wiki/Sharp_Zaurus>https://en.wikipedia.org/wiki/Sharp_Zaurus</a> (Lizenz<br><a href=https://creativecommons.org/licenses/by-sa/3.0/deed.en>CC BY-SA 3.0 Deed</a>) sieht man einen Zaurus, auf dem <a href=https://en.wikipedia.org/wiki/OpenEmbedded>OpenEmbedded</a> und Opie (später<br><a href=https://de.wikipedia.org/wiki/OpenZaurus>OpenZaurus</a>) läuft. Opie war damals in Qt 2 geschieben &mdash; was ich damals noch<br>nicht konnte &mdash; und hatte z.B. Terminkalender, Adressbuch, TODO-Liste etc<br>integriert.<br></p><p>Michael und Chris beispielsweise hatten diese Geräte und wollten dafür Images<br>erstellen.<br></p><p>Ich selbst hatte aus beruflichen Gründen den Wunsch, Images für ARM-Geräte zu<br>erstellen. Mein damaliger Arbeitgeber hatte den <a href=../../de/mnci/>MNCI </a>auf<br>Basis des PXA320 entwickelt, und dafür mußte Software her &mdash; und zwar kein<br>Windows CE.<br></p><p>Wir trafen uns auf IRC und beratschlagten, wie man so ein Image bauen könnte.<br>Es müsste mit den diversen Zaurus-Hardware-Versionen (Collie, Poodle etc)<br>klarkommen, aber auch mit meinem Industriegerät. In der Firma setzte ich damals<br>Red Hat ein, privat hatte ich aber gerade mit Gentoo experimentiert. Und so kam<br>ich auf die Idee, das man &ldquo;Rezepte&rdquo; zum Bauen von Paketen haben sollte. Wer ganau<br>hinschaut wird merken, das sie an die &ldquo;<code>.ebuild</code>&rdquo; von gentoo erinnern.<br></p><p>Ein großer Unterschied zu Gentoo ist natürlich die Cross-Compilierung und daher<br>das &ldquo;Staging&rdquo;-Konzept. Um beispielsweise libpng für ARM cross-compilieren zu<br>können, muß die glibc ebenfalls für ARM vorliegen. Sie kann aber nicht da stehen,<br>wo meine normale glibc für meinen Linux-Entwicklungsrechner steht. Sondern muß davon<br>getrennt sein, eben im &ldquo;Staging&rdquo;-Bereich.<br></p><p>Was wir auch machen mußten: viele Buildsystem (beispielsweise GNU Autoconf)<br>erstellen zum Zeitpunkt von &ldquo;<code>./configure</code>&rdquo; viele kleine Testprogramme und<br>lassen diese dann laufen. So stellen sie z.B. fest wie lange ein Integer ist,<br>oder ob O_SYNC implementiert ist. Nur: wenn wir cross-compilieren, dann sind<br>diese Testprogramme ja in ARM-Maschinensprache. Mein Entwicklungsrechner war<br>aber i386. Also schlagen alle diese Tests fehl, &ldquo;<code>./configure</code>&rdquo; geht nicht. Und<br>qemu-user-static existierte noch nicht. Also mussten wir die diversen<br>Build-Systeme dazu überreden, von uns vorab erstellte Ergebnisse dieser Tests zu<br>nehmen statt selbst zu testen.<br></p><h2 id=bitbake>Bitbake</h2><p>Diese Bau-Rezepte wurden von Bitbake ausgeführt. Die ersten 100-300 Commits<br>(weiss ich nicht mehr genau) stammen von mir. Ebenso das Design der Rezepte und<br>&ldquo;<code>.bbclass</code>&rdquo; Klassen.<br></p><p>Nachteilig von Bitbake damals war die lange Latenz beim Starten eines Build. So<br>wie ich die Rezepte organisiert hatte, mussten sie im Prinzip alle eingelesen werden<br>um einen Dependency-Graph aufzubauen. Und dieses Parsen war, auch wg. Python, nicht<br>das schnellste. Ich selbst hatte das Problem damals nicht gelöst, bis ca. 500 Rezepte<br>konnte man es auch noch aushalten. Aber als OpenEmbedded immer größer wurde, war es<br>ein großes Problem. Deswegen würde ich Holger Freyther (&ldquo;zecke&rdquo; im IRC) noch mit<br>aufnehmen: er hatte einen Cache des Graphen eingebaut.<br></p><h2 id=von-bitkeeper-zu-git>Von BitKeeper zu Git</h2><p>Wir hatten den Source damals in einem &ldquo;distributed source code versioning<br>system&rdquo; names <a href=https://en.wikipedia.org/wiki/Bitkeeper>BitKeeper</a> gehalten. Das war sozusagen der Vorgänger und Ideengeber<br>zu Git &mdash; und der letzte Schrei. Die Firma &ldquo;BitMover Inc&rdquo; hatte BitKeeper für<br>OpenSource-Projekte kostenlos gemacht. Auch der Linux-Kernel verwendete es.<br></p><p>Als dann aber das Verhältnis von &ldquo;BitMover Inc&rdquo; zur Kernel-Community sauer<br>wurde, hat Linus Torvalds &ldquo;<code>git</code>&rdquo; entwickelt, in die Linux-Kernel-Community<br>eingeführt. Und wir von OpenEmbedded sind nahezu zeitgleich umgestiegen.<br></p><h2 id=mein-ausstieg>Mein Ausstieg</h2><p>Leider hat sich der &ldquo;MNCI&rdquo; nicht gut verkauft &mdash; der Spediteur, für den wir den<br>MCNI entwickelt haben, meinte auf einmal &ldquo;Also ich bin international, und ihr<br>seid eine kleine 30-Personen-Firma. Von euch kann ich das nicht kaufen&rdquo;. M&amp;N<br>konnte die Entwicklungskosten nicht refinanzieren und meldete Insolvenz an.<br></p><p>Damit hatte es sich für mich erübrigt, an OpenEmbedded weiterzuarbeiten &mdash;<br>Interesse an PDAs hatte ich nämlich nicht.<br></p><p>Später habe ich für andere ARM-Platformen kein OpenEmbedded mehr genommen,<br>sondern mir direkt Debian ARM installiert. Das war um Größenordnungen schneller,<br>da ja keinerlei Sourcen mehr compiliert werden müssen. Ich spreche hier von<br>Minuten statt 16 Stunden um ein Image &ldquo;from Scratch&rdquo; neu zu bauen.<br></p><p>Aber das war ungefähr zu den Zeitpunkt, an dem Yocto entstand. Und so war die<br>Zukunft von OpenEmbedded gesichert. Wenn ich mir heute Stellenanzeigen in<br>&ldquo;Embedded&rdquo; Bereich anschaue, wird OpenEmbedded sehr häufig erwähnt: das Projekt<br>&ldquo;brummt&rdquo;.<br></p><h2 id=verwandte-projekte>Verwandte Projekte</h2><p>Die folgenden Projekte verwenden OpenEmbedded:<br></p><ul><li><a href=../../de/mnci/>MNCI: Handterminal mit ARM (Intel PXA320)</a><br></li><li>TODO(Artikel schreiben) Linux-Image auf Basis von i.MX& RISC Prozessor für den Tagebau</li></ul><div class=post-meta><div><i class="fa fa-copyright fa-fw"></i>
License: <a href=https://spdx.org/licenses/CC-BY-SA-4.0.html target=_blank>CC-BY-SA 4.0</a></div><div><i class="fa fa-calendar fa-fw"></i>
<time>2024-01-19</time></div><div><i class="fa fa-folder fa-fw"></i>
<a class=post-taxonomy-topic href=../../categories/job>job</a>
<a class=rss type=application/rss+xml href=../../categories/job/index.xml><span class="fa fa-rss">RSS</span></a></div><div><i class="fa fa-tags fa-fw"></i>
<a class=post-taxonomy-tag href=../../tags/arm>arm</a>
<a class=rss type=application/rss+xml href=../../tags/arm/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/linux>linux</a>
<a class=rss type=application/rss+xml href=../../tags/linux/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/openembedded>openembedded</a>
<a class=rss type=application/rss+xml href=../../tags/openembedded/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/opie>opie</a>
<a class=rss type=application/rss+xml href=../../tags/opie/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/pxa320>pxa320</a>
<a class=rss type=application/rss+xml href=../../tags/pxa320/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/sa1110>sa1110</a>
<a class=rss type=application/rss+xml href=../../tags/sa1110/index.xml><span class="fa fa-rss">RSS</span></a>
&nbsp;/
<a class=post-taxonomy-tag href=../../tags/zaurus>zaurus</a>
<a class=rss type=application/rss+xml href=../../tags/zaurus/index.xml><span class="fa fa-rss">RSS</span></a></div></div></div></div></div><script src=../../js/ui.js></script><script src=../../js/menus.js></script></body></html>